Github original

https://github.com/ehazlett/docker-sample-java-mysql-tomcat


git add .
git commit -m "app completa"
git push -u origin master


oc new-project j-m-t22

oc new-app mysql MYSQL_ROOT_PASSWORD=mysenha
POD=`oc get pods -l app=mysql | grep Running | grep 1/1 | awk '{print $1}'`
oc cp ./cargadb/init.sql $POD:/tmp
oc exec $POD -- bash -c "mysql --user=root < /tmp/init.sql"

oc new-app tomcat:7
POD=`oc get pods -l app=tomcat | grep Running | grep 1/1 | awk '{print $1}'`
oc set volume dc/tomcat --add --overwrite --name=v1 --mount-path=/usr/local/tomcat/webapps/my
POD=`oc get pods -l app=tomcat | grep Running | grep 1/1 | awk '{print $1}'`

oc cp dbtest/index.jsp $POD:/usr/local/tomcat/webapps/my
oc cp dbtest/META-INF/ $POD:/usr/local/tomcat/webapps/my
oc cp dbtest/WEB-INF/ $POD:/usr/local/tomcat/webapps/my

oc cp dbtest $POD:/usr/local/tomcat/webapps/my/dbtest



oc expose svc/tomcat


oc new-app tomcat:7 -p DATABASE__CONNECTION__USER=root DATABASE__CONNECTION__DATABASE=javatest DATABASE__CONNECTION__PASSWORD=mysenha
oc delete svc/tomcat
oc expose pod/$POD --name=tomcat
oc exec -it $POD /bin/bash
oc set volume pod/$POD --all
